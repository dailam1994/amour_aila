var se=Object.defineProperty,ne=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var _=(r,n,t)=>n in r?se(r,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[n]=t,d=(r,n)=>{for(var t in n||(n={}))oe.call(n,t)&&_(r,t,n[t]);if(O)for(var t of O(n))ie.call(n,t)&&_(r,t,n[t]);return r},k=(r,n)=>ne(r,ae(n));import{j as s,ad as j,a as e,I as w,d as le,c as ce,e as de,f as ue,L as m,T as c,u as Z,F as v,C as E,l as M,r as T,X as H,Y as L,B as g,H as Q,Z as f,$,m as S,a2 as q,a3 as R,a4 as D,a5 as z,V as pe,W as he,a6 as me,a7 as N,a8 as A,R as xe,b,g as U,a0 as ye,A as fe,h as ge,i as be,k as ve,M as we}from"./vendor.3d87cbec.js";import{n as Se,d as Ie,a as Ce,b as V,c as Ee,u as Te,h as Ne,f as Ae,g as Pe,e as J,i as Y,l as Be,m as W,R as $e,D as Le,k as ke}from"./record.update.bdabbc79.js";import{u as X,a as K,e as y}from"./guest.login.88d56f5f.js";const Re=()=>s("footer",{className:"footer-basic",children:[s(j,{className:"social",style:{padding:"10px 35px"},children:[e("a",{href:"https://m.instagram.com/",children:e(w,{"aria-label":"instagram",children:e(le,{fontSize:"medium",style:{color:"rgb(255,255,2555)"}})})}),e("a",{href:"https://m.youtube.com/",children:e(w,{"aria-label":"instagram",children:e(ce,{fontSize:"medium",style:{color:"rgb(255,255,255)"}})})}),e("a",{href:"https://m.twitter.com/",children:e(w,{"aria-label":"instagram",children:e(de,{fontSize:"medium",style:{color:"rgb(255,255,255)"}})})}),e("a",{href:"https://m.facebook.com/",children:e(w,{"aria-label":"instagram",children:e(ue,{fontSize:"medium",style:{color:"rgb(255,255,255)"}})})})]}),s(j,{id:"internal-links",children:[e(m,{to:"/",children:"Home"}),e(m,{to:"/booking/availability",children:"Booking"}),e(m,{to:"/appointment/user",children:"Appointment"})]}),e(c,{className:"copyright",variant:"caption",display:"block",align:"center",children:"AmourAila \xA9 2022"})]}),ze=async()=>(await((t=1100)=>new Promise(l=>setTimeout(l,t)))(),await fetch("https://user.technolashes.com/api/user/client",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(t=>{switch(t.status){case 200:return t.json();case 400:throw new Error("400 Status Code");case 401:throw new Error("401 Status Code");case 429:throw new Error("429 Status Code");case 500:throw new Error("500 Status Code")}}).then(t=>{if(t)return t}).catch(t=>console.log(t))),F=()=>Z("client-session",ze,{refetchOnWindowFocus:!1}),G=()=>{localStorage.getItem("colour")=="rgb(0,0,0)"?Se():Ie();const{data:r}=F();return s(v,{children:[e(c,{sx:{m:"10px"},variant:"h4",children:r?s("strong",{children:["Welcome ",r.user.username,","]}):e("strong",{children:"Welcome Client,"})}),e(c,{sx:{my:"10px",mx:"30px",pb:"10px"},variant:"subtitle1",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."})]})},Me=()=>s(v,{children:[e(c,{sx:{m:"10px"},variant:"h4",children:e("strong",{children:"Settings"})}),s(E,{sx:{my:"50px"},children:[e(m,{to:"/user/edit",style:{margin:0},children:s(M,{children:[e(Ce,{color:"primary"}),e(c,{sx:{ml:"20px"},aligh:"center",color:"primary",children:"Manage Account"}),e(V,{fontSize:"small",color:"primary",style:{position:"absolute",right:"10px"}})]})}),e(m,{to:"/display",style:{margin:0},children:s(M,{children:[e(Ee,{color:"primary"}),e(c,{sx:{ml:"20px"},aligh:"center",color:"primary",children:"Display Mode"}),e(V,{fontSize:"small",color:"primary",style:{position:"absolute",right:"10px"}})]})})]})]}),Fe=()=>{const r=X(),[n,t]=T.exports.useState({showPassword:!0}),[l,i]=T.exports.useState("");let u;const{data:p}=F();p&&(u=p.user.userId);const{isLoading:x,isError:P,error:a,data:o,isFetching:B}=Te(u),{register:h,handleSubmit:ee,formState:{errors:I}}=K();T.exports.useEffect(()=>{o&&i(o.roles)},[o]);const re=C=>{C=="password"&&(t(k(d({},n),{showPassword:!n.showPassword})),n.showPassword?document.getElementById("password").setAttribute("type","text"):document.getElementById("password").setAttribute("type","password"))},{mutate:te}=Ne();return s(v,{children:[s(H,{sx:{width:"100%"},children:[e(L,{id:"user-edit-error",severity:"error",style:{display:"none"},children:e("strong",{id:"user-edit-error-message"})}),e(L,{id:"user-edit-success",severity:"success",style:{display:"none"},children:e("strong",{children:"Update Successfully!"})})]}),e(c,{sx:{m:"10px"},variant:"h4",children:e("strong",{children:"Edit Account"})}),x||B?e(g,{sx:{display:"flex",justifyContent:"center",m:2},children:e(Q,{color:"secondary"})}):P?e(E,{sx:{display:"flex",justifyContent:"center"},children:s(c,{style:{color:"white"},children:["Error: ",a.message]})}):o?e(v,{children:s("form",{onSubmit:ee(C=>{document.getElementById("user-edit-success").style.display="none",document.getElementById("user-edit-error").style.display="none",C.userID=u,C.roles=l,te(C)}),style:{display:"flex",flexDirection:"column",backgroundColor:"rgb(50,53,101)",padding:"20px 10px",margin:"10px 30px",borderRadius:"10px"},children:[e(f,d({id:"username",ref:h,color:"primary",sx:{m:"10px"},variant:"outlined",name:"username",label:"Username",defaultValue:o.username,InputLabelProps:{className:r.input},InputProps:{className:r.input,readOnly:!0}},h("username",{required:!0,pattern:/^[a-zA-Z0-9]{3,255}$/i}))),I.username&&e("span",{style:y,children:"! Invalid user name ..."}),e(f,d({id:"firstName",ref:h,color:"primary",sx:{m:"10px"},variant:"outlined",name:"firstName",label:"First Name",defaultValue:o.firstName,InputLabelProps:{className:r.input},InputProps:{className:r.input}},h("firstName",{required:!0,pattern:/^[a-zA-Z ,.'-]{3,200}$/i}))),I.firstName&&e("span",{style:y,children:"! Invalid first name ..."}),e(f,d({id:"lastName",ref:h,color:"primary",sx:{m:"10px"},variant:"outlined",name:"lastName",defaultValue:o.lastName,label:"Last Name",InputLabelProps:{className:r.input},InputProps:{className:r.input}},h("lastName",{required:!0,pattern:/^[a-zA-Z ,.'-]{3,200}$/i}))),I.lastName&&e("span",{style:y,children:"! Invalid last name ..."}),e(f,d({id:"dateOfBirth",ref:h,color:"primary",sx:{m:"10px"},variant:"outlined",name:"dateOfBirth",label:"Date of Birth",defaultValue:o.dateOfBirth.substring(0,10),InputLabelProps:{className:r.input},InputProps:{className:r.input}},h("dateOfBirth",{required:!0,pattern:/^[0-9]{4}-[0-1]{1}[0-9]{1}-[0-3]{1}[0-9]{1}$/i}))),I.dateOfBirth&&e("span",{style:y,children:"! Invalid Date of Birth ..."}),e(f,d({id:"email",ref:h,color:"primary",sx:{m:"10px"},variant:"outlined",name:"email",label:"Email",defaultValue:o.email,InputLabelProps:{className:r.input},InputProps:{className:r.input}},h("email",{required:!0,maxLength:200,pattern:/[a-zA-z0-9_.+-]+@[a-zA-z0-9-]+\.[a-zA-Z0-9-.]+/i}))),I.email&&e("span",{style:y,children:"! Invalid email ..."}),e(f,d({id:"password",type:"password",ref:h,color:"primary",sx:{m:"10px"},variant:"outlined",name:"password",label:"Password",defaultValue:o.password,InputLabelProps:{className:r.input},InputProps:{className:r.input,endAdornment:e($,{position:"end",children:e(w,{"aria-label":"toggle password visibility",onClick:C=>re("password"),edge:"end",children:n.showPassword?e(Ae,{sx:{color:"rgb(255,255,255)"}}):e(Pe,{sx:{color:"rgb(255,255,255)"}})})})}},h("password",{required:!0,pattern:/^((?=\S*?[A-Z])(?=\S*?[a-z])(?=\S*?[0-9]).{6,})\S$/i}))),I.password&&e("span",{style:y,children:"! Invalid password ..."}),e(g,{sx:{display:"flex",justifyContent:"center",mt:"10px"},children:e(S,{variant:"contained",color:"warning",type:"submit",sx:{width:"50%"},style:{textTransform:"none"},children:"Edit"})})]})}):null,e(m,{to:"/settings",children:s(S,{sx:{m:"10px",mb:"20px"},variant:"contained",color:"primary",children:[e(J,{fontSize:"small",sx:{mr:"10px"}}),"Back"]})})]})},Oe=async({queryKey:r})=>{await((l=2200)=>new Promise(i=>setTimeout(i,l)))();const t=r[1];if(t)return await fetch(`https://user.technolashes.com/api/record/user/${t}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(i=>{switch(i.status){case 200:return i.json();case 400:throw new Error("400 Status Code");case 401:throw new Error("401 Status Code");case 429:throw new Error("429 Status Code");case 500:throw new Error("500 Status Code")}}).then(i=>{if(i)return i}).catch(i=>console.log(i))},_e=r=>Z(["record-user",r],Oe,{refetchOnWindowFocus:!1}),je=()=>{const[r,n]=T.exports.useState("");let t;const{data:l}=F();T.exports.useEffect(()=>{l&&n(l.user.userId)},[l]);const{isLoading:i,isError:u,error:p,data:x,isFetching:P}=_e(r);return x&&(t=x.reduce((a,o)=>(a.some(B=>B.record.date===o.record.date&&B.userUserID===o.userUserID)||a.push(o),a),[])),s(v,{children:[e(c,{sx:{m:"10px"},variant:"h4",children:e("strong",{children:"My Records"})}),e(E,{sx:{display:"flex",justifyContent:"center"},children:e(m,{to:"/record/add",children:e(S,{variant:"contained",color:"success",children:"Create New Record"})})}),e(g,{sx:{m:"10px"},children:i||P?e(E,{sx:{display:"flex",justifyContent:"center",mt:1},children:e(g,{children:e(Q,{color:"secondary"})})}):u?e(E,{sx:{display:"flex",justifyContent:"center"},children:e(g,{children:s(c,{style:{color:"rgb(0,0,0)"},children:["Error: ",p.message]})})}):x||t?t.map(a=>s(q,{children:[e(R,{expandIcon:e(Y,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:e(c,{variant:"subtitle2",color:"secondary",children:e("em",{children:a.record.date})})}),x.map(o=>{if(a.userUserID===o.userUserID&&a.record.date===o.record.date)return s(q,{children:[e(D,{sx:{my:0,py:0},children:e(R,{expandIcon:e(Y,{}),"aria-controls":"panel1a-content",id:"panel1a-header",sx:{my:0,py:0},children:e(c,{variant:"subtitle2",children:s("strong",{style:{color:"rgb(50, 53, 101)"},children:[o.record.start+" ","-"," "+o.record.end]})})})}),s(z,{container:!0,spacing:2,children:[e(z,{item:!0,xs:7,children:e(D,{children:e(R,{"aria-controls":"panel1a-content",id:"panel1a-header",children:s(c,{variant:"subtitle2",sx:{display:"flex",flexDirection:"column",mt:"-10px",p:0},textAlign:"left",children:[s("em",{children:["Service 1:"," ",o.record.firstService=="true"?e("strong",{style:{color:"green"},children:"Yes"}):e("em",{style:{color:"red"},children:"nope"})]}),s("em",{children:["Service 2:"," ",o.record.secondService=="true"?e("strong",{style:{color:"green"},children:"Yes"}):e("em",{style:{color:"red"},children:"nope"})]}),s("em",{children:["Service 3:"," ",o.record.thirdService=="true"?e("strong",{style:{color:"green"},children:"Yes"}):e("em",{style:{color:"red"},children:"nope"})]}),s("em",{children:["Service 4:"," ",o.record.fourthService=="true"?e("strong",{style:{color:"green"},children:"Yes"}):e("em",{style:{color:"red"},children:"nope"})]}),s("em",{children:["Service 5:"," ",o.record.fifthService=="true"?e("strong",{style:{color:"green"},children:"Yes"}):e("em",{style:{color:"red"},children:"nope"})]})]})})})}),e(z,{item:!0,xs:5,sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:e(m,{to:`/record/update/${a.record.recordID}`,children:e(S,{size:"small",variant:"contained",color:"warning",sx:{m:1,width:"100px"},style:{textTransform:"none"},children:"Edit"})})})]})]},o.recordRecordID)})]},a.recordRecordID)):null})]})},qe=async r=>{await((t=2200)=>new Promise(l=>setTimeout(l,t)))(),console.log(r),await fetch("https://user.technolashes.com/api/record",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)}).then(t=>{switch(t.status){case 200:return t.json();case 400:throw new Error("400 Status Code");case 401:throw new Error("401 Status Code");case 429:throw new Error("429 Status Code");case 500:throw new Error("500 Status Code")}}).then(t=>{if(t)return document.getElementById("record-add-success").style.display="flex",t}).catch(t=>{document.getElementById("record-add-error").style.display="flex",document.getElementById("record-add-error-message").innerHTML=t,console.log(t)})},De=()=>{const r=he();return pe("record-add",qe,{refetchOnWindowFocus:!1,onSuccess:()=>{r.invalidateQueries("record-all")}})},Ue=()=>{const r=X(),[n,t]=T.exports.useState(!1);let l;const{register:i,handleSubmit:u,formState:{errors:p}}=K(),{mutate:x}=De();return s(v,{children:[s(H,{sx:{width:"100%"},children:[e(L,{id:"record-add-error",severity:"error",style:{display:"none"},children:e("strong",{id:"record-add-error-message"})}),e(L,{id:"record-add-success",severity:"success",style:{display:"none"},children:e("strong",{children:"Record Created Successfully!"})})]}),e(c,{sx:{m:"10px"},variant:"h4",children:e("strong",{children:"Create Record"})}),s("form",{onSubmit:u(a=>{document.getElementById("record-add-success").style.display="none",document.getElementById("record-add-error").style.display="none",a.serviceOne==!1&&a.serviceTwo==!1&&a.serviceThree==!1&&a.serviceFour==!1&&a.serviceFive==!1?(t(!0),console.log("Need to pick one service")):(t(!1),l={date:a.date,start:a.startTime,end:a.endTime,firstService:a.serviceOne,secondService:a.serviceTwo,thirdService:a.serviceThree,fourthService:a.serviceFour,fifthService:a.serviceFive},x(l))}),style:{display:"flex",flexDirection:"column",backgroundColor:"rgb(50,53,101)",padding:"20px 10px",margin:"10px 30px",borderRadius:"10px"},children:[e(f,d({id:"date",sx:{m:"10px"},variant:"outlined",name:"date",label:"Date",InputLabelProps:{className:r.input},InputProps:{className:r.input,endAdornment:e($,{position:"end",children:e(Be,{sx:{color:"rgb(255,255,255)"}})})}},i("date",{required:!0,pattern:/[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]$/i}))),p.date&&e("span",{style:y,children:"! Invalid Date YYYY-MM-DD - format ..."}),e(f,d({id:"startTime",sx:{m:"10px"},variant:"outlined",name:"startTime",label:"Start Time",InputLabelProps:{className:r.input},InputProps:{className:r.input,endAdornment:e($,{position:"end",children:e(W,{sx:{color:"rgb(255,255,255)"}})})}},i("startTime",{required:!0,pattern:/[0-1]?[0-9]:?[0-5][0-9](A|P)M$/i}))),p.startTime&&e("span",{style:y,children:"! Invalid Start Time 12:00AM - format ..."}),e(f,k(d({id:"endTime",sx:{m:"10px"},variant:"outlined",name:"endTime",label:"End Time",InputLabelProps:{className:r.input}},i("endTime",{required:!0,pattern:/[0-1]?[0-9]:?[0-5][0-9](A|P)M$/i})),{InputProps:{className:r.input,endAdornment:e($,{position:"end",children:e(W,{sx:{color:"rgb(255,255,255)"}})})}})),p.endTime&&e("span",{style:y,children:"! Invalid End Time 12:00PM - format ..."}),s(me,{sx:{width:1,ml:11,mt:2},children:[e(N,{control:e(A,d({color:"success",sx:{color:"rgb(255,255,255)"}},i("serviceOne"))),label:"Service 1",sx:{color:"rgb(255,255,255)"}}),e(N,{control:e(A,d({color:"success",sx:{color:"rgb(255,255,255)"}},i("serviceTwo"))),label:"Service 2",sx:{color:"rgb(255,255,255)"}}),e(N,{control:e(A,d({color:"success",sx:{color:"rgb(255,255,255)"}},i("serviceThree"))),label:"Service 3",sx:{color:"rgb(255,255,255)"}}),e(N,{control:e(A,d({color:"success",sx:{color:"rgb(255,255,255)"}},i("serviceFour"))),label:"Service 4",sx:{color:"rgb(255,255,255)"}}),e(N,{control:e(A,d({color:"success",sx:{color:"rgb(255,255,255)"}},i("serviceFive"))),label:"Service 5",sx:{color:"rgb(255,255,255)"}})]}),n?e("span",{style:y,children:"! Please pick at least 1 service ..."}):null,e(g,{sx:{display:"flex",justifyContent:"center",mt:"10px"},children:e(S,{type:"submit",variant:"contained",color:"success",sx:{width:"50%"},style:{textTransform:"none"},children:"Create"})})]}),e(m,{to:"/record",children:s(S,{sx:{m:"10px",mb:"20px"},variant:"contained",color:"primary",children:[e(J,{fontSize:"small",sx:{mr:"10px"}}),"Back"]})})," "]})},Ve=()=>e(v,{children:s(xe,{children:[e(b,{path:"record",element:e(je,{})}),e(b,{path:"record/add",element:e(Ue,{})}),e(b,{path:"record/update/:id",element:e($e,{})}),e(b,{path:"display",element:e(Le,{})}),e(b,{path:"user/edit",element:e(Fe,{})}),e(b,{path:"settings",element:e(Me,{})}),e(b,{path:"registered/home",element:e(G,{})}),e(b,{path:"/",element:e(G,{})})]})}),Ye=[{id:1,title:"Home",href:"/"},{id:2,title:"Record",href:"record"},{id:3,title:"Settings",href:"settings"}],Je=()=>{const[r,n]=U.useState(null);U.useState(!0),ye();const t=u=>{n(u.currentTarget)},l=()=>{n(null)},i=async()=>{await((p=1001)=>new Promise(x=>setTimeout(x,p)))(),await fetch("https://user.technolashes.com/api/user/logout",{method:"POST",credentials:"include"}).then(p=>{p.status===200?(console.log("Logged out successfully!"),window.location.href="https://technolashes.com"):console.log("Error Logging out!")}).catch(p=>console.log(p))};return s(v,{children:[e(fe,{position:"static",children:e(E,{maxWidth:"xl",children:s(ge,{disableGutters:!0,children:[e(g,{sx:{display:"flex"},children:e(m,{to:"/",children:e(w,{size:"large","aria-label":"logo",color:"inherit",children:e("img",{src:"../assets/img/Logo.webp",alt:"Logo",height:"50",width:"50"})})})}),e(c,{variant:"h6",sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:"AmourAila"}),e(c,{variant:"h6",noWrap:!0,component:"div",sx:{mr:2,display:{xs:"none",md:"flex"}},children:"AmourAila"}),s(g,{sx:{flexGrow:0},children:[e(be,{title:"Open menu",children:e(w,{size:"large","aria-label":"current menu","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:t,color:"inherit",children:e(ve,{})})}),s(we,{sx:{mt:"45px",width:"100%"},id:"menu-appbar",anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(r),onClose:l,style:{position:"absolute"},children:[Ye.map(u=>e(m,{to:u.href,style:{margin:0},children:e(M,{onClick:l,style:{width:"1000px"},children:e(c,{sx:{ml:"5px"},align:"center",color:"primary",children:u.title})})},u.id)),e(g,{sx:{display:"flex",justifyContent:"center",mr:"10px"},children:e(m,{to:"",onClick:l,children:s(S,{variant:"contained",color:"warning",onClick:i,style:{textTransform:"none"},children:[e(ke,{sx:{mr:"5px"}}),"Sign out"]})})})]})]})]})})}),e(Ve,{}),e(Re,{})]})};export{Je as default};
